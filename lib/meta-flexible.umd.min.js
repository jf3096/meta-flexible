!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};!function(t,n,i){function o(e,t){if(!e)throw new Error(M+": "+t)}function r(e,t){e||console.warn(M+": "+t)}function a(){o(!c(),"在使用当前工具库时请勿使用自定义viewpoint meta. viewpoint meta 将会通过当前工具自动计算生成.")}function c(){return n.querySelector('meta[name="viewport"]')}function d(){n.body?n.body.style.fontSize=12*C+"px":n.addEventListener("DOMContentLoaded",d)}function u(e,t){if(!e){if(!e){var i=c();i?e=i:(e=n.createElement("meta"),e.setAttribute("name","viewport"))}e.setAttribute("content",t);var o=T.querySelector("head");if(o)o.appendChild(e);else{var r=n.createElement("div");r.appendChild(e),n.write(r.innerHTML)}}else e.setAttribute("content",t);return e}function s(e){switch(e){case m.TargetDensityDpi:f();break;case m.ScaleRatio:l();break;default:o(!1,"未知 meta-flexible 方案, plan = "+e)}}function f(){_()}function l(){var e=t.screen.width,n=e/S;n>1&&(n=1),k(n)}function p(){if(C>=2){var e=n.createElement("body"),t=n.createElement("div");t.style.border=".5px solid transparent",e.appendChild(t),T.appendChild(e),1===t.offsetHeight&&T.classList.add("hairlines"),T.removeChild(e)}}function v(e){var t=T.clientWidth;e();var n=T.clientWidth;return w()===S?h.Unknown:n===t?h.No:h.Yes}function w(){return t.screen.width}var m={TargetDensityDpi:0,ScaleRatio:1},h={Yes:1,No:-1,Unknown:0},b={namespace:"meta-flexible",designViewpoint:750,getMetaViewpointTargetDensityDpiContent:function(e){return"width="+e+", target-densitydpi=device-dpi, user-scalable=no, viewport-fit=cover"},getMetaViewpointScaleRatioContent:function(e){return"width=device-width, initial-scale="+e+", maximum-scale="+e+", minimum-scale="+e+", user-scalable=no, viewport-fit=cover"},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},plans:[m.TargetDensityDpi,m.ScaleRatio],Plan:m,enableBodyFontSize:!1},y=e({},b,i),g=y.getMetaViewpointTargetDensityDpiContent,E=y.getMetaViewpointScaleRatioContent,D=y.namespace,M=D,S=y.designViewpoint,T=n.documentElement,C=t.devicePixelRatio||1,L=[m.TargetDensityDpi,m.ScaleRatio],_=function(){var e=!1;return function(){e||(u(void 0,g(S)),e=!0)}}(),k=function(){var e=void 0;return function(t){e=u(e,E(t))}}(),x=function(){var e=void 0,t=h.No;return function(){if(e!==T.clientWidth){if(e=T.clientWidth,t===h.Yes)return void s(L[0]);for(;t===h.No;){if(L.length<=0){setTimeout(function(){return o(!1,D+"所使用的所有方案失效, 暂用最后一种方案兜底")},0);break}t=v(function(){return s(L[0])}),t===h.No&&L.shift()}t===h.Unknown&&(t=h.No)}}}();!function(){var e=y.enableBodyFontSize;if(!(0,y.isMobile)())return void r(!1,"请确保在移动端下使用"+D);a(),e&&d(),x(),t.addEventListener("resize",function(){var e=void 0;return function(){clearTimeout(e),e=setTimeout(x,300)}}()),t.addEventListener("pageshow",function(e){e.persisted&&x()},!1),p()}()}(window,document,window.__META_FLEXIBLE__=window.__META_FLEXIBLE__||{})});
//# sourceMappingURL=meta-flexible.umd.min.js.map
